# Testing and Validation
---

## Assessment Measures and Evaluation Technique
The following testing procedure aims to verify that the agent correctly identifies and understands user intents for creating new claims, sending pending document reminders for open claims, gathering claims evidence, and searching for information on existing claims. Response accuracy is determined by evaluating the relevancy, coherency, and human-like nature of the answers generated by Agents and Knowledge base for Amazon Bedrock. 

### Testing and Validation Procedure
1.  **Input Validation Testing:** Use sample prompts to assess the agent's understanding and responsiveness to diverse user inputs.

<p align="center">
  <img src="../design/input-validation-test.png" width="80%" height="80%">
</p>
<p align="center">
  <em>Figure 8: Input Validation Testing Result</em>
</p>

2.  **Instruction Configuration Testing:** Validate the agent's adherence to configured instructions for interpreting user inputs accurately.

<p align="center">
  <img src="../design/instruction-configuration-test.png" width="80%" height="80%">
</p>
<p align="center">
  <em>Figure 9: Instruction Configuration Testing Result</em>
</p>

3.  **User Input Interpretation:**
> - **Pre-processing Evaluation:** Assess the agent's ability to validate, contextualize, and categorize user input accurately.
> - **Orchestration Workflow:** Evaluate the logical steps the agent follows for action group API invocations and knowledge base queries to enhance the base prompt for the foundation model.
> - **Post-processing Assessment:** Review the final responses generated by the agent after orchestration iterations to ensure accuracy and relevance.

<p align="center">
  <img src="../design/user-input-test.png" width="80%" height="80%">
</p>
<p align="center">
  <em>Figure 10: User Input Interpretation Test</em>
</p>

4.  **Action Group Testing:**
> - **API Schema Validation:** Validate that the OpenAPI schema (defined as JSON files stored in S3) functions effectively to guide the agent in reasoning around each API's purpose.
> - **Business Logic Execution:** Test the execution of business logic associated with API paths through Lambda functions linked with the action group.

<p align="center">
  <img src="../design/ag-test.png" width="80%" height="80%">
</p>
<p align="center">
  <em>Figure 11: Action Group Testing Result</em>
</p>

5.  **Knowledge Base Evaluation:**
> - Configuration Verification: Ensure the knowledge base setup correctly directs the agent on when to access the data.
> - S3 Data Source Integration: Validate the agent's ability to access and utilize data stored in the specified Amazon S3 data source.

<p align="center">
  <img src="../design/kb-test.png" width="80%" height="80%">
</p>
<p align="center">
  <em>Figure 12: Knowledge Base Testing Result</em>
</p>

6.  **End-to-End Testing:**
> - Integrated Workflow: Perform comprehensive tests involving both action groups and knowledge bases to simulate real-world scenarios.
> - Response Quality Assessment: Evaluate the overall accuracy, relevancy, and coherence of the agent's responses in diverse contexts and scenarios.

<p align="center">
  <img src="../design/complete-test.png" width="80%" height="80%">
</p>
<p align="center">
  <em>Figure 13: End-to-End Testing Result</em>
</p>

7.  Performance and Scaling Tests:
• Load Testing: Assess the agent's performance under varying loads of concurrent user requests.
• Scalability Testing: Evaluate the agent's scalability to handle increased volumes of data and user interactions without compromising response times or quality.
8.  Error Handling and Recovery:
• Error Scenarios: Test the agent's behavior and responses in scenarios of malformed inputs or unexpected errors.
• Recovery Mechanisms: Validate the agent's ability to recover from errors and maintain its functionality.
9.  Documentation and Reporting:
• Test Reports: Compile detailed reports outlining test scenarios, results, and any identified issues.
• Documentation Updates: Update agent documentation with any discovered enhancements, adjustments, or fixes.
10. Regression Testing:
• Re-test Procedures: Run tests periodically to ensure ongoing accuracy and functionality after updates or modifications to the agent.


## Resources
- [Generative AI on AWS](https://aws.amazon.com/generative-ai/)
- [Amazon Bedrock](https://aws.amazon.com/bedrock/)
- [Agents for Amazon Bedrock](https://docs.aws.amazon.com/bedrock/latest/userguide/agents.html)
- [Knowledge Base for Amazon Bedrock](https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base.html)
- [Amazon DynamoDB](https://aws.amazon.com/dynamodb/)
- [Amazon Simple Notification Service (SNS)](https://docs.aws.amazon.com/sns/latest/dg/welcome.html)

---

## Clean Up
see [Clean Up](../documentation/clean-up.md)

---

Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
SPDX-License-Identifier: MIT-0
